{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Proxmox VMs and Containers</title>
    <link rel="stylesheet" href="{% static 'vm_viewer/styles.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    
</head>
<body class="bg-[#181818]" id="body">
    
    <h1>Proxmox VMs</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Status</th>
                <th>Node</th> 
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for vm in vms %}
            <tr>
                <td>{{ vm.vmid }}</td>
                <td>{{ vm.name }}</td>
                <td>{{ vm.status }}</td>
                <td>{{ vm.node }}</td>
                <td>
                    {% if vm.status == 'running' %}
                        <form action="{% url 'toggle_vm' vm.vmid 'stop' vm.node %}" method="POST" >
                            {% csrf_token %}
                            <input type="submit" value="Stop" class="btn btn-danger">
                        </form>
                    {% else %}
                        <form action="{% url 'toggle_vm' vm.vmid 'start' vm.node %}" method="POST" >
                            {% csrf_token %}
                            <input type="submit" value="Start" class="btn btn-success">
                        </form>
                    {% endif %}
                </td>
                {% endfor %}
        </tbody>
    </table>

    <h1>Proxmox Containers</h1>  
    <table>  
        <thead>  
            <tr>  
                <th>ID</th>  
                <th>Name</th>  
                <th>Status</th>
                <th>Node</th>
                <th>Action</th>  
            </tr>  
        </thead>  
        <tbody>  
            {% for container in containers %}  
            <tr>  
                <td>{{ container.vmid }}</td>  
                <td>{{ container.name }}</td>  
                <td>{{ container.status }}</td> 
                <td>{{ container.node }}</td> 
                <td>
                    {% if container.status == 'running' %}
                        <form action="{% url 'toggle_vm' container.vmid 'stop' container.node %}" method="POST" >
                            {% csrf_token %}
                            <input type="submit" value="Stop" class="btn btn-danger">
                        </form>
                    {% else %}
                        <form action="{% url 'toggle_vm' container.vmid 'start' container.node %}" method="POST" >
                            {% csrf_token %}
                            <input type="submit" value="Start" class="btn btn-success">
                        </form>
                    {% endif %}
                </td>
                {% endfor %}
        </tbody>
    </table>

<!-- --------------------------------------- -->

<div class="px-4 mx-auto max-w-screen-2xl md:px-8">
    <header>
        <h1 class="text-5xl font-bold text-center m-5 text-slate-100">
            Paklic panel
        </h1>
    </header>
    <div class="py-6 sm:py-8 lg:py-12">
        <div class="px-4 mx-auto max-w-screen-2xl md:px-8">
            <!-- text - start -->
            <div class="mb-10 md:mb-16">
                <h2 class="mb-4 text-2xl font-bold text-center text-slate-300 lg:text-3xl md:mb-6">
                    Nodes
                </h2>                   
            </div>
            <!-- text - end -->
            <div class="grid gap-8 sm:grid-cols-2 xl:grid-cols-3 sm:gap-y-10" id="Nodes">
                <!-- node - start -->
                
                <!-- node - end -->
            </div>
        </div>
    </div>
    <div class="flex flex-col items-center pt-6 border-t border-gray-500"></div>
    <div class="px-4 mx-auto max-w-screen-2xl md:px-8">
        <!-- text - start -->
        <div class="mb-10 md:mb-16">
            <h2 class="mb-4 text-2xl font-bold text-center text-slate-300 lg:text-3xl md:mb-6" id="ServersHeder">
                Servers
            </h2>
            
        </div>

        <!-- text - end -->
        <div class="grid gap-8 sm:grid-cols-2 xl:grid-cols-3 sm:gap-y-10" id="Servers">
            <!-- server - start -->
            
            <!-- server - end -->
        </div>
    </div>
</div>
<script src="{% static 'vm_viewer/tailwind.js' %}"></script>
<script src="{% static 'vm_viewer/script.js' %}"></script>
</body>
</html>

